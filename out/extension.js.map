{"version":3,"sources":["../src/extension.ts"],"sourcesContent":["import * as vscode from 'vscode';\r\nimport path from 'path';\r\n\r\nexport function activate(context: vscode.ExtensionContext) {\r\n    const output = vscode.window.createOutputChannel('eSpeak');\r\n\r\n    try {\r\n        const disposable = vscode.commands.registerCommand('vscode-espeak.speak', async () => {\r\n            const editor = vscode.window.activeTextEditor;\r\n            if (!editor) {\r\n                vscode.window.showInformationMessage('Open a file or select text to speak.');\r\n                return;\r\n            }\r\n\r\n            const selection = editor.selection;\r\n            const text = editor.document.getText(selection) || editor.document.getText();\r\n\r\n            const panel = vscode.window.createWebviewPanel(\r\n                'espeak',\r\n                'eSpeak TTS',\r\n                vscode.ViewColumn.One,\r\n                { enableScripts: true, retainContextWhenHidden: true }\r\n            );\r\n\r\n            const speakjs = panel.webview.asWebviewUri(\r\n                vscode.Uri.file(path.join(context.extensionPath, 'speakjs', 'speakClient.js'))\r\n            );\r\n\r\n            panel.webview.html = `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <style>\r\n                    body { font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }\r\n                    #console { flex: 1; background: #1e1e1e; color: #d4d4d4; padding: 10px; overflow-y: auto; font-family: monospace; }\r\n                    #status { padding: 5px; background: #333; color: white; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div id=\"status\">eSpeak console:</div>\r\n                <div id=\"console\"></div>\r\n\r\n                <script src=\"${speakjs}\"></script>\r\n                <script>\r\n                    const consoleDiv = document.getElementById('console');\r\n                    (function() {\r\n                        const origLog = console.log;\r\n                        console.log = function(...args) {\r\n                            origLog(...args);\r\n                            args.forEach(arg => {\r\n                                const msg = document.createElement('div');\r\n                                msg.textContent = arg;\r\n                                consoleDiv.appendChild(msg);\r\n                            });\r\n                            consoleDiv.scrollTop = consoleDiv.scrollHeight;\r\n                        };\r\n                    })();\r\n                    try {\r\n                        speak(\\`${text}\\`);\r\n                    } catch (err) {\r\n                        console.log('eSpeak error:', err.message);\r\n                    }\r\n                </script>\r\n            </body>\r\n            </html>\r\n            `;\r\n        });\r\n\r\n        context.subscriptions.push(disposable);\r\n\r\n    } catch (err: any) {\r\n        output.appendLine(`eSpeak err! ${err.message}`);\r\n        output.show();\r\n    }\r\n}\r\n\r\nexport function deactivate() {}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAwB;AACxB,kBAAiB;AAEV,SAAS,SAAS,SAAkC;AACvD,QAAM,SAAgB,cAAO,oBAAoB,QAAQ;AAEzD,MAAI;AACA,UAAM,aAAoB,gBAAS,gBAAgB,uBAAuB,YAAY;AAClF,YAAM,SAAgB,cAAO;AAC7B,UAAI,CAAC,QAAQ;AACT,QAAO,cAAO,uBAAuB,sCAAsC;AAC3E;AAAA,MACJ;AAEA,YAAM,YAAY,OAAO;AACzB,YAAM,OAAO,OAAO,SAAS,QAAQ,SAAS,KAAK,OAAO,SAAS,QAAQ;AAE3E,YAAM,QAAe,cAAO;AAAA,QACxB;AAAA,QACA;AAAA,QACO,kBAAW;AAAA,QAClB,EAAE,eAAe,MAAM,yBAAyB,KAAK;AAAA,MACzD;AAEA,YAAM,UAAU,MAAM,QAAQ;AAAA,QACnB,WAAI,KAAK,YAAAA,QAAK,KAAK,QAAQ,eAAe,WAAW,gBAAgB,CAAC;AAAA,MACjF;AAEA,YAAM,QAAQ,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAcF,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAgBJ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQ9B,CAAC;AAED,YAAQ,cAAc,KAAK,UAAU;AAAA,EAEzC,SAAS,KAAU;AACf,WAAO,WAAW,eAAe,IAAI,OAAO,EAAE;AAC9C,WAAO,KAAK;AAAA,EAChB;AACJ;AAEO,SAAS,aAAa;AAAC;","names":["path"]}